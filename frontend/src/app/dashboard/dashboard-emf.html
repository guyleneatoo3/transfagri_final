<app-sidebar-layout>
  <section class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-4" *ngIf="!isChildView">
    <button class="rounded-xl p-4 text-left shadow bg-amber-400 text-slate-900 hover:brightness-95" routerLink="/dashboard/emf/questionnaire">
      <div class="font-semibold">Indicateurs</div>
      <div class="text-3xl font-extrabold">{{ loading ? '...' : counts.indicateurs }}</div>
      <div class="underline text-sm">Voir détails →</div>
    </button>
    <button class="rounded-xl p-4 text-left shadow bg-indigo-500 text-white hover:brightness-95" routerLink="/dashboard/emf/questionnaire">
      <div class="font-semibold">Questionnaires</div>
      <div class="text-3xl font-extrabold">{{ loading ? '...' : counts.questionnaires }}</div>
      <div class="underline text-sm">Voir détails →</div>
    </button>
    <button class="rounded-xl p-4 text-left shadow bg-rose-500 text-white hover:brightness-95" routerLink="/dashboard/emf/formations">
      <div class="font-semibold">Formations</div>
      <div class="text-3xl font-extrabold">{{ loading ? '...' : counts.activites }}</div>
      <div class="underline text-sm">Voir détails →</div>
    </button>
  </section>
  <section class="mt-4" *ngIf="!isChildView">
    <app-kpi-charts [emfs]="counts.emfs" [indicateurs]="counts.indicateurs" [questionnaires]="counts.questionnaires" [activites]="counts.activites"></app-kpi-charts>
    <app-extra-charts [emfs]="counts.emfs" [indicateurs]="counts.indicateurs" [questionnaires]="counts.questionnaires" [activites]="counts.activites"></app-extra-charts>
  </section>
  <section *ngIf="isChildView">
    <div class="max-w-6xl mx-auto">
      <router-outlet></router-outlet>
    </div>
  </section>
</app-sidebar-layout>
